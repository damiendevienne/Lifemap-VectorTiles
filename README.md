# Lifemap-VectorTiles

Generate vector tiles for Lifemap (or any other hierarchical structure).

## Step 0 (optional): download a tree from NCBI
To downaload the NCBI taxonomy and return a NHX-formatted tree, you can use the `get_NCBI_taxo_FR.py` function. Call this function with the `-h` argument to get a description of its use and options. 


To get the entire unfiltered NCBI taxonomy with french translations, just run:
```
get_NCBI_taxo_FR.py
```
This returns a file called All.tre, containing the entire NCBI taxonomy tree with additional faeatures included, in NHX format. 

To get the entire NCBI taxonomy with french translations of the bacteria only:
```
get_NCBI_taxo_FR.py --taxid 2
```
This returns a file called 2.tre. Multiple taxids can be passed to the `--taxid` option, separated by space. 


# Step 1: 
The function `StepNewick2json.py` takes as input a tree in Newick or NHX format (like the one generated by get_NCBI_taxo_FR.py, see above) and outputs all json files necessary for Lifemap to be created. 
These files contain all the attributes of the tips and nodes present in the newick file as 'properties' in the json. 

To generate the Lifemap json files for a tere called `tree.tre`, simply type: 
```
Newick2json.py -i tree.tre
```

To see all the available options, type `Newick2json.py -h`

# Step 2: Generate all vector tiles
This step is performed with a program called Tippecanoe, See (here)[https://github.com/mapbox/tippecanoe] for a description of this amazing tool. 
## 2.1: Install Tippecanoe
From Tippecanoe documentation, here is what is said for installation: 

> The easiest way to install tippecanoe on OSX is with Homebrew:

> ```
> $ brew install tippecanoe
> ```
> On Ubuntu it will usually be easiest to build from the source repository:

> ```$ git clone git@github.com:mapbox/tippecanoe.git
> $ cd tippecanoe
> $ make -j
> $ make install 
> ```


# Dependencies
* **tippecanoe** for generating tiles in mbtile format from geojson
* **tileserver-gl-light** for serving the tiles and applying styles


